tag @e remove bac_leaderboard.targeted_ranker
execute positioned 0 -128 0 in overworld run tag @e[tag=bac_leaderboard.temp,sort=furthest,limit=1] add bac_leaderboard.targeted_ranker

tag @a remove bac_leaderboard.ranker_target
execute as @e[tag=bac_leaderboard.targeted_ranker] at @a if score @s bac_leaderboard.UUID0 = @p bac_leaderboard.UUID0 if score @s bac_leaderboard.UUID1 = @p bac_leaderboard.UUID1 if score @s bac_leaderboard.UUID2 = @p bac_leaderboard.UUID2 if score @s bac_leaderboard.UUID3 = @p bac_leaderboard.UUID3 run tag @p add bac_leaderboard.ranker_target

execute if entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 4.. run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"gray"},{"text":". ","color":"gray"},{"selector":"@a[tag=bac_leaderboard.ranker_target]"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute if entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 3 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"gold"},{"text":". ","color":"gold"},{"selector":"@a[tag=bac_leaderboard.ranker_target]"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute if entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 2 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"white"},{"text":". ","color":"white"},{"selector":"@a[tag=bac_leaderboard.ranker_target]"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute if entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 1 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"yellow"},{"text":". ","color":"yellow"},{"selector":"@a[tag=bac_leaderboard.ranker_target]"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]

execute unless entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 4.. run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"gray"},{"text":". ","color":"gray"},{"italic":true,"entity":"@s","nbt":"ArmorItems[3].tag.SkullOwner.Name"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute unless entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 3 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"gold"},{"text":". ","color":"gold"},{"italic":true,"entity":"@s","nbt":"ArmorItems[3].tag.SkullOwner.Name"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute unless entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 2 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"white"},{"text":". ","color":"white"},{"italic":true,"entity":"@s","nbt":"ArmorItems[3].tag.SkullOwner.Name"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]
execute unless entity @a[tag=bac_leaderboard.ranker_target] as @e[tag=bac_leaderboard.targeted_ranker] if score @s bac_leaderboard.rank matches 1 run tellraw @a[tag=bac_leaderboard.show_to] ["",{"score":{"name":"@s","objective":"bac_leaderboard.rank"},"color":"yellow"},{"text":". ","color":"yellow"},{"italic":true,"entity":"@s","nbt":"ArmorItems[3].tag.SkullOwner.Name"},{"text":" - ","color":"gray"},{"score":{"name":"@s","objective":"bac_leaderboard.value"},"color":"green"}]


tag @e[tag=bac_leaderboard.targeted_ranker] remove bac_leaderboard.temp

execute unless entity @e[tag=bac_leaderboard.temp] run tellraw @a[tag=bac_leaderboard.show_to] ["\n"]
execute if entity @e[tag=bac_leaderboard.temp] run function bac_leaderboard:rec/show_leaderboard
